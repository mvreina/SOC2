{% extends 'core/base.html' %}

{% block content %}

<div class="container">
    <div class="d-flex mt-4">
        <div class="p-2  flex-grow-1">
            <h3 class="title-type1">Estadísticas por proyecto</h3>
        </div>
        <!--div class="p-2"><a class="btn btn-primary btn-sm" href="{% url 'projectCreate' %}"><i class="bi bi-plus-square"></i> Crear Proyecto</a></div-->
    </div>
</div>

<hr class="rules">

<!-- Sección de Mensajes-->
{% if messages %}
{% for message in messages %}
<div class="container">
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        <!--div class="alert alert-danger alert-dismissible fade show" role="alert"-->
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
</div>
{% endfor %}
{% endif %}

<div class="container mt-4">
    <div class="card">
        <div class="card-body">
            <div class="mb-3">
                <select class="form-select" aria-label="Proyecto" id="projectSelect">
                    <option value="0" selected>Seleccione un proyecto</option>
                    {% for project in projects %}
                    <option value="{{ project.id }}">{{ project.name|safe }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="d-flex flex-row justify-content-evenly">
                <div id="piechartPolicies" style="width: 600px; height: 300px;"></div>
                <div class="table-responsive mt-4">
                    <table id="dataTablePolicies" class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Estado</th>
                                <th>Cantidad</th>
                            </tr>
                        </thead>
                        <tbody id="dataBodyPolicies">
                            <tr>
                                <td>Aprobado</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>Descontinuado</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>Borrador</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td><b>Total</b></td>
                                <td><b>0</b></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <hr class="rules">
            <div class="d-flex flex-row justify-content-evenly">
                <div id="piechartControls" style="width: 600px; height: 300px;"></div>
                <div class="table-responsive mt-4">
                    <table id="dataTableControls" class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Estado</th>
                                <th>Cantidad</th>
                            </tr>
                        </thead>
                        <tbody id="dataBodyControls">
                            <tr>
                                <td>Aprobado</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>Descontinuado</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>Borrador</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td><b>Total</b></td>
                                <td><b>0</b></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<div id="error-message" style="color: red;"></div>


<!-- Google Charts JS -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<!-- Custom JS -->
{% load static %}
<script src="{% static 'js/projectCharts.js' %}"></script>



{% endblock %}